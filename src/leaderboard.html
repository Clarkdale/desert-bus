<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <title>Desert Bus</title>
    <link rel="stylesheet" type="text/css" href="styles.css">
  </head>
  <body onload="retrieveInfo()">
    <img src="../images/logo.png" alt="logo " class="logo">
    <div class="highScores">
      <b style="display: table; margin: 0 auto;">High Scores</b>
      <div id="scores" style="display: table; margin: 0 auto;"></div>
    </div>
    <button onclick="begin()">Continue</button>
    <script>
      function begin() {
        window.location.href = "canvas.html";
      }

      function retrieveInfo() {
        var ajax = new XMLHttpRequest();
        var elem = document.getElementById("scores");
        var rec;
        ajax.open("GET", "controller.php?n=leaderboard&count=5", true);
        ajax.send();
        ajax.onreadystatechange = function() {
          if (ajax.readyState == 4 && ajax.status == 200) {
            document.getElementById("scores").innerHTML = "";
            console.log(ajax.responseText);
            rec = JSON.parse(ajax.responseText);
            console.log(rec);
            for (let i = 0; i < 5 && i < rec.length; i++) {
              document.getElementById("scores").innerHTML += rec[i]['Username'] + ": " + rec[i]['Score'];
              document.getElementById("scores").innerHTML += "<br>";
            }
          }
        }
      }
    </script>
  </body>
</html>
